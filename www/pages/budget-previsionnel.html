<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Budget Prévisionnel - BudgetApp</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
<nav class="navbar">
    <h1>BudgetApp</h1>
    <ul>
        <li><a href="../index.html">Accueil</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="add.html">Ajouter</a></li>
        <li><a href="history.html">Historique</a></li>
        <li><a class="active" href="budget-previsionnel.html">Prévisionnel</a></li>
    </ul>
</nav>

<main class="container" style="max-width:900px;margin:0 auto;">
    <section class="card">
        <h2 style="margin-top:0">Budget Prévisionnel</h2>

        <form id="budgetForm">

            <!-- MOIS -->
            <div class="form-group" style="max-width:320px">
                <label for="mois">Mois concerné</label>
                <input type="month" id="mois" required>
            </div>

            <!-- TOTAL AUTOMATIQUE -->
            <div class="form-group" style="margin-top:12px">
                <label>Total du budget (automatique)</label>
                <div id="affTotal"
                     style="padding:12px;background:#f3f4f6;border-radius:8px;font-weight:bold;font-size:18px;">
                    0 FCFA
                </div>
            </div>

            <!-- CATÉGORIES -->
            <div id="listeCategories" style="margin-top:8px; padding-top:14px;">
            </div>

            <!-- BOUTONS -->
            <div style="display:flex;gap:12px;margin-top:16px;flex-wrap:wrap">
                <button type="button" id="addCat" class="btn btn-ghost">+ Ajouter une catégorie</button>
                <button type="submit" class="btn btn-primary">Enregistrer le budget</button>
            </div>

        </form>
    </section>
</main>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="../firebase.js"></script>
<script src="../categories.js"></script>
<script src="../app.js"></script>
<script src="../previsionnel.js"></script>

<script>
    console.log("PAGE ACTUELLE :", window.location.pathname);
</script>

<script>
    firebase.auth().onAuthStateChanged(user=>{
      if(!user) window.location.href="auth.html";
    });
</script>


</body>
</html>
